function yourlsMessage(s,r){jQuery("div#wpbody h2:first").after('<div id="message" class="'+s+' below-h2"><p>'+r+"</p></div>")}function yourlsClearAdmin(){jQuery("div#wpbody div#message").remove(),jQuery("div#wpbody div#setting-error-settings_updated").remove()}function yourlsBtnDisable(s,r,e){jQuery(s).find(r).css("visibility","visible"),jQuery(s).find(e).attr("disabled","disabled")}function yourlsBtnEnable(s,r,e){jQuery(s).find(r).css("visibility","hidden"),jQuery(s).find(e).removeAttr("disabled")}jQuery(document).ready(function(s){s.fn.divExists=function(s){var r=[].slice.call(arguments,1);return this.length&&s.call(this,r),this};var r="",e="",i="",t="",o="",a="",n="";s("div.yourls-sidebox").on("click","a.admin-twitter-link",function(){return s(window).width()>765?(r=s(this).attr("href"),window.open(r,"social-share-dialog","width=626,height=436"),!1):void 0}),s("td.apikey-field-wrapper").divExists(function(){s("input#yourls-api").hidePassword(!1),s("td.apikey-field-wrapper").on("click","span.password-toggle",function(){s(this).hasClass("password-visible")?(s(this).removeClass("password-visible"),s("input#yourls-api").hidePassword(!1)):(s(this).addClass("password-visible"),s("input#yourls-api").showPassword(!1))})}),s("div.yourls-sidebox").find("a.external").attr("target","_blank"),s("tr.setting-item-types").divExists(function(){e=s(this).find("input#yourls-cpt").is(":checked"),e===!0&&s("tr.secondary").show(),e===!1&&(s("tr.secondary").hide(),s("tr.secondary").find("input:checkbox").prop("checked",!1)),s("tr.setting-item-types").on("change","input#yourls-cpt",function(){e=s(this).is(":checked"),e===!0&&s("tr.secondary").fadeIn(700),e===!1&&(s("tr.secondary").fadeOut(700),s("tr.secondary").find("input:checkbox").prop("checked",!1))})}),s("div#yourls-post-display").on("click","input.yourls-api",function(){if(a=s(this).data("post-id"),n=s(this).data("nonce"),""!==a&&""!==n){s("div#wpbody div#message").remove(),s("div#wpbody div#setting-error-settings_updated").remove(),s("div#yourls-post-display").find("span.yourls-spinner").css("visibility","visible"),s("div#yourls-post-display").find("input.yourls-api").attr("disabled","disabled"),o=s("div#yourls-post-display").find("input.yourls-keyw").val();var r={action:"create_yourls",keyword:o,post_id:a,nonce:n};jQuery.post(ajaxurl,r,function(r){s("div#yourls-post-display").find("span.yourls-spinner").css("visibility","hidden"),s("div#yourls-post-display").find("input.yourls-api").removeAttr("disabled");var e;try{e=jQuery.parseJSON(r)}catch(i){yourlsMessage("error",yourlsAdmin.defaultError)}e.success===!0?yourlsMessage("updated",e.message):e.success===!1&&null!==e.message?yourlsMessage("error",e.message):yourlsMessage("error",yourlsAdmin.defaultError),e.success===!0&&null!==e.linkbox&&(s("div#yourls-post-display").find("p.yourls-submit-block").remove(),s("div#yourls-post-display").find("p.yourls-input-block").replaceWith(e.linkbox),s("div#edit-slug-box").append('<input type="hidden" value="'+e.linkurl+'" id="shortlink">'),s("div#edit-slug-box").append(yourlsAdmin.shortSubmit))})}}),s("div#yourls-post-display").on("click","span.yourls-delete",function(){if(a=s(this).data("post-id"),n=s(this).data("nonce"),""!==a&&""!==n){s("div#wpbody div#message").remove(),s("div#wpbody div#setting-error-settings_updated").remove();var r={action:"delete_yourls",post_id:a,nonce:n};jQuery.post(ajaxurl,r,function(r){var e;try{e=jQuery.parseJSON(r)}catch(i){yourlsMessage("error",yourlsAdmin.defaultError)}e.success===!0?yourlsMessage("updated",e.message):e.success===!1&&null!==e.message?yourlsMessage("error",e.message):yourlsMessage("error",yourlsAdmin.defaultError),e.success===!0&&null!==e.yourlsbox&&(s("div#yourls-post-display").find("p.howto").remove(),s("div#yourls-post-display").find("p.yourls-exist-block").replaceWith(e.linkbox),s("div#edit-slug-box").find("input#shortlink").remove(),s("div#edit-slug-box").find('a:contains("Get Shortlink")').remove())})}}),s("div.row-actions").on("click","a.yourls-admin-update",function(r){if(r.preventDefault(),n=s(this).data("nonce"),""!==n&&(a=s(this).data("post-id"),""!==a)){t=s(this).parents("div.row-actions"),i=s(this).parents("tr.entry").find("td.yourls-click");var e={action:"stats_yourls",post_id:a,nonce:n};jQuery.post(ajaxurl,e,function(s){t.removeClass("visible");var r;try{r=jQuery.parseJSON(s)}catch(e){return!1}r.success===!0&&null!==r.clicknm&&i.find("span").text(r.clicknm)})}}),s("div.row-actions").on("click","a.yourls-admin-create",function(r){if(r.preventDefault(),n=s(this).data("nonce"),""!==n&&(a=s(this).data("post-id"),""!==a)){t=s(this).parents("div.row-actions"),i=s(this).parents("div.row-actions").find("span.create-yourls");var e={action:"inline_yourls",post_id:a,nonce:n};jQuery.post(ajaxurl,e,function(s){t.removeClass("visible");var r;try{r=jQuery.parseJSON(s)}catch(e){return!1}r.success===!0&&null!==r.rowactn&&i.replaceWith(r.rowactn)})}}),s("div#yourls-admin-status").on("click","input.yourls-click-status",function(){if(n=s("input#yourls_status").val(),""!==n){yourlsClearAdmin(),yourlsBtnDisable("div#yourls-admin-status","span.yourls-status-spinner","input.yourls-click-status");var r={action:"status_yourls",nonce:n};jQuery.post(ajaxurl,r,function(r){yourlsBtnEnable("div#yourls-admin-status","span.yourls-status-spinner","input.yourls-click-status");var e;try{e=jQuery.parseJSON(r)}catch(i){yourlsMessage("error",yourlsAdmin.defaultError)}e.success===!0?(""!==e.baricon&&s("div#yourls-admin-status").find("span.api-status-icon").replaceWith(e.baricon),""!==e.message&&s("div#yourls-admin-status").find("p.api-status-text").text(e.message),""!==e.stcheck&&(s("div#yourls-admin-status").find("p.api-status-actions").append(e.stcheck),s("span.api-status-checkmark").delay(3e3).fadeOut(1e3))):e.success===!1&&null!==e.message?yourlsMessage("error",e.message):yourlsMessage("error",yourlsAdmin.defaultError)})}}),s("div#yourls-data-refresh").on("click","input.yourls-click-updates",function(){if(n=s("input#yourls_refresh").val(),""!==n){yourlsClearAdmin(),yourlsBtnDisable("div#yourls-data-refresh","span.yourls-refresh-spinner","input.yourls-click-updates");var r={action:"refresh_yourls",nonce:n};jQuery.post(ajaxurl,r,function(s){yourlsBtnEnable("div#yourls-data-refresh","span.yourls-refresh-spinner","input.yourls-click-updates");var r;try{r=jQuery.parseJSON(s)}catch(e){yourlsMessage("error",yourlsAdmin.defaultError)}r.success===!0&&""!==r.message?yourlsMessage("updated",r.message):r.success===!1&&null!==r.message?yourlsMessage("error",r.message):yourlsMessage("error",yourlsAdmin.defaultError)})}}),s("div#yourls-data-refresh").on("click","input.yourls-click-import",function(){if(n=s("input#yourls_import").val(),""!==n){yourlsClearAdmin(),yourlsBtnDisable("div#yourls-data-refresh","span.yourls-import-spinner","input.yourls-click-import");var r={action:"import_yourls",nonce:n};jQuery.post(ajaxurl,r,function(s){yourlsBtnEnable("div#yourls-data-refresh","span.yourls-import-spinner","input.yourls-click-import");var r;try{r=jQuery.parseJSON(s)}catch(e){yourlsMessage("error",yourlsAdmin.defaultError)}r.success===!0&&""!==r.message?yourlsMessage("updated",r.message):r.success===!1&&null!==r.message?yourlsMessage("error",r.message):yourlsMessage("error",yourlsAdmin.defaultError)})}}),s("div#yourls-data-refresh").on("click","input.yourls-convert",function(){if(n=s("input#yourls_convert").val(),""!==n){yourlsClearAdmin(),yourlsBtnDisable("div#yourls-data-refresh","span.yourls-convert-spinner","input.yourls-convert");var r={action:"convert_yourls",nonce:n};jQuery.post(ajaxurl,r,function(s){yourlsBtnEnable("div#yourls-data-refresh","span.yourls-convert-spinner","input.yourls-convert");var r;try{r=jQuery.parseJSON(s)}catch(e){yourlsMessage("error",yourlsAdmin.defaultError)}r.success===!0&&""!==r.message?yourlsMessage("updated",r.message):r.success===!1&&null!==r.message?yourlsMessage("error",r.message):yourlsMessage("error",yourlsAdmin.defaultError)})}})});